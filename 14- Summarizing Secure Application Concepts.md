# Summarizing Secure Application Concepts

# ANALYZE INDICATORS OF APPLICATION ATTACKS

- الاتاكس علي التطبيقات والبرامج بتسمح بتشغيل اكواد برمجيه خبيثه علي الجهاز اللي عليه ال application ده
- بيتم زرع الكود الخبيث ده عن طريق vulnerability بيكتشفها الاتاكر في جهاز ال victim ممكن يزرع بقي virus او worm او backdoor او trojan

---

# APPLICATION ATTACKS

- اي هجمه علي application بتستهدف ثغرات في نظام التشغيل او الـ app نفسه
- الثغره دي بتكون نقطة ضعف فالـ source code الخاص بالبرنامج بيقدر من خلالها الاتاكر اني يدخل علي الجهاز من خلالها

### Privilege Escalation

- بعد ما الاتاكر يخش علي جهاز ال victim بيعوز يعمل حاجات معينه بس الحاجات دي مينفعش يعملها الا ال admin user فا بيعمل عملية ال  Privilege Escalation عشان يرقي صلاحياته لأدمن
- وبرضو يقدر يشغل برامج خبيثه ويتحكم ف ال process بتاعت البرنامج اللي اخترقه
- يعني مثلا لو تم تهكير برنامج زي vlc يقدر الاتاكر يوقف البرنامج او اي حاجه تخصه سواء process تانيه مرتبطه بال vlc او اي شئ
- لما باجي اشغل كود برمجي خبيث من جهاز ال attacker لجهاز ال victim بنسمي الحاله دي Remote Code Execution - RCE

---

### Error Handling

- تعرف ياصديقي اني ال Error اللي بيطلعلك ف اي برنامج ده ممكن يكون ثغره بالنسبه للاتاكر!!! ايوا انا مبهزرش
- تخيل معايا لو في هاكر بيحاول يخترقك وبيدخل ايميل وباسورد خاصين بيك فا ظهرلو رساله مثلا Password is incorrect
- هتقولي دي ماسدج عاديه ايه المشكله؟ هيا اه عاديه بالنسبالك بس مهمه جدا بالنسبه للهاكر لأنو كدا عرف اني الايميل صح انما الباسورد هو اللي غلط فا هيبدأ يركز علي الباس شوفت بقي؟
- خلي بالك لو انت كنت فاتح برنامج معين وبعد شويه جيت تفتحو تاني لقيتو بيجبلك Errors غريبه اعمل scan عليه عشان غالبا البرنامج ده في اتاكر هكرو

---

### Improper Input Handling

- الموضوع ده خطر جدا لأني معظم الهجمات بتتم بسببه
- أغلب البرامج بتقبل بيانات من المستخدم، سواء البيانات دي كانت مكتوبة يدويًا أو جاية من برنامج تاني، زي ما المتصفح بيبعت رابط للسيرفر أو عملية في ويندوز بتستخدم API بتاع عملية تانية.
- الممارسات الصح في البرمجة بتقول إن البيانات اللي جاية من المستخدم لازم تتراجع علشان نتأكد إنها صحيحة ومطابقة لنوع البيانات اللي العملية مستنياها Validation
- معظم الهجمات على التطبيقات بتحصل لما يتم إرسال بيانات غير صحيحة أو مصممة بشكل خبيث للعملية اللي فيها ثغرة
- استغلال مشاكل التعامل مع البيانات بيتم بطرق كتير، لكن أغلب الهجمات دي بتتقسم لنوعين: هجمات Overflow أو هجمات Injection
- في هجوم الـ Overflow، المهاجم بيبعت بيانات حجمها أكبر من اللي البرنامج مخصص له متغير.
- المفروض إن الأكواد اللي بتستخدم في الهجمات دي يتم اكتشافها عن طريق أنظمة كشف الاختراق (IDS) أو برامج الحماية على الأجهزة
- المحاولات الفاشلة للهجوم ممكن تبان من خلال أخطاء أو كراش غير مبرر بعد تحميل ملف، تشغيل تطبيق جديد، تنفيذ سكريبت، أو توصيل جهاز جديد

---

### ثغرات Overflow:

- **Buffer Overflow**:
    - الـ Buffer هو مساحة في الذاكرة البرنامج بيحجزها لتخزين البيانات المتوقعة.
    - المهاجم بيستغل الثغرة عن طريق إرسال بيانات بتتعدى سعة الـ Buffer.
- **Stack Overflow**:
    - الـ Stack هي مساحة في الذاكرة بتستخدمها دوال البرنامج، وبتشمل عنوان الرجوع (Return Address) اللي بيحدد مكان استكمال البرنامج بعد انتهاء الدالة.
    - المهاجم ممكن يستغل الـ Buffer Overflow لتغيير عنوان الرجوع، وبالتالي يشغل أكواد ضارة على النظام.

![image.png](image.png)

---

**MEMORY LEAKS AND RESOURCE EXHAUSTION**

- من المعروف والطبيعي اني لما بتفتح اي برنامج بيتخزن مؤقتها علي الرام ولما بتيجي تعمل end task او تقفل البرنامج يعني مساحته بتتشال من الرام
- الثغره دي بقي بتخليك لو حتي قفلت البرنامج هيفضل واخد مساحه من الرام علي اساس انو شغال

---

### DLL Injection

- **dynamic link library (DLL)**

-بص يسطا دي library جاهزه ف نظام الويندوز حرفيا الملفات دي مسؤوله عن اي حاجه الجهاز بيعملها يعني مثلا عشان تفتح الواي فاي بيكون في ملف DLL مخصوص للواي فاي بيشتغل عشان تقدر تشغل الواي فاي عشان افتح برنامج معين لازم ليه DLL معين

-طب ايه رأيك لو اخترقنا ملف ال DLL بتاع الواي فاي مثلا عشان ال victim يجي يفتح نت عالجهاز اكون انا حاقن ملف ال DLL ده ب malware فا اول مايشغل الواي فاي جهازه ينتشر فيه ال malware علاطول

---

## Analyze Indicators of Web Application Attacks

### uniform resource locator (URL)

- هجمات ال url اللي ممكن من خلالها اخد أكسس علي الموقع او حاجات تانيه كتير

![image.png](image%201.png)

- **HTTP Methods**

-طبعا لما باجي افتح موقع معين فا ببعت طلب لل web server بس مش طلب عادي بيكون متكون من كام حاجه طبعا احنا بس محتاجين نعرف ال methods بتاعت بروتوكل ال HTTP

1. GET ⇒ used to retrieve a resource.
2. POST ⇒ send data to the server for processing by the requested resource
3. PUT ⇒ create or replace the resource
4. DELETE ⇒ can be used to remove the resource
5. HEAD ⇒ retrieve the headers for a resource only (not the body)
- ال HTTP Response بيكون عباره عن اول حاجه وهيا 200 ودي معناها Ok وبيبدأ يعرضلك الويب سايت او ممكن يكون 404 ودي معناها Not Found وكدا بيقولك الموقع دا مش موجود

### REPLAY ATTACKS

- تخيل معايا كدا لو انت كل يوم بتدخل عالفيس بتقعد تدخل الايميل والباس بتوعك كل شويه الموضوع ممل ومتعب صح؟
- هنا ال browsers حلت لينا المشكله دي من خلال اني لما ببعت طلب تسجيل دخول للويب سيرفر هيرد عليا بالموقع ويديني token ومش بيدهولي مباشرة هو بيديه للمتصفح عشان كل ماجي افتح يروح المتصفح باعته للسيرفر علاطول فا الموقع يفتح معايا من غير تسجيل دخول
- ال developers بدأو يطورو من ال tokens ويعملو cookies ال cookie دي بتكون زي ال token بس فيها تفاصيل عنك اكتر زي اليوزر ده اخر مره كان فاتح انهي صفحه الموقع والوقت اللي دخل وخرج فيه وبيكون فيه ال token
- طب افرض في اتاكر هكر المتصفح اللي انت بتستعمله زي Google Chrome مثلا ممكن يقدر يخش علي ملف ال cookies ويعرف كل ال tokens الخاصه بالاكونتات بتاعتك اللي بتفتحها علي جوجل كروم

### Session Hijacking

وهو ان الشخص يقوم بعمل Sniff على الشبكة ويراقب ال cookie اللي انت طلبتها , لذلك لابد ان يكون مشفر , لانه لو قام بالحصول على رقم ال cookie يسطيع ايضا بالدخول بدالك

![image.png](image%202.png)

---

### CROSS-SITE SCRIPTING (XSS)

- طبعا دلوقتي كل المواقع بتتعمل بال JS واللي بتقوم بعمليات ال scripting
- الثغره دي بيستغلها المهاجم ازاي؟
- اي مكان بيقبل input ف الموقع يقدر يدخل عليه ويزرع جواه malicious code الكود دا بيعمل اي وظيفه بقي هو عاوزها ممكن يزرع فالكود ده backdoor وبكدا اي حد يخش علي الموقع هيصاب بال backdoor
- الا بقي لو انت عامل Validation كويس ومخلي ال Input يقبل كلمات وحروف معينه بس

![image.png](image%203.png)

---

### STRUCTURED QUERY LANGUAGE (SQL) INJECTION

- هنا الهاكر بيحقن ال data base اللي بتكون معموله بال SQL ويقدر انو يخرب فيها ويعدل فيها لو الاختراق نجح
- العمليات الأساسية اللي بتتم على قواعد البيانات باستخدام SQL هي:
- **SELECT:** لاختيار البيانات
- **INSERT:** لإضافة بيانات جديدة
- **DELETE:** لحذف البيانات
- **UPDATE:** لتحديث البيانات

---

## Summarize Secure Coding Practices

- **التحقق من المدخلات (Input Validation):**
    - من الطرق الأساسية للهجوم على التطبيقات استغلال أخطاء في التحقق من المدخلات
    - المدخلات ممكن تكون بيانات بيكتبها المستخدم في نموذج، أو روابط (URLs) بتتبعت من تطبيق تاني زي HTTP Header
    - المدخلات الخبيثة ممكن تستخدم في هجمات زي Overflow، Script Injection، أو SQL Injection
    - لتقليل المخاطر:
        - لازم يتم توثيق كل طرق إدخال البيانات المتاحة في التطبيق علشان نقلل مساحة الهجوم المحتملة
        - لازم يتم التحقق من المدخلات، وأي حاجة مش مطابقة للمطلوب يتم رفضها
- **تأمين الكوكيز (Secure Cookies):**
    - تجنب استخدام كوكيز دائمة (Persistent Cookies) لتوثيق الجلسات
    - استخدم كوكي جديد كل مرة المستخدم يعمل إعادة تسجيل دخو
    - فعل خاصية **Secure Attribute** علشان تمنع إرسال الكوكي على اتصالات HTTP غير مشفرة
    - استخدم **HttpOnly Attribute** علشان تمنع الوصول للكوكيز من سكريبتات العميل (Client-Side Scripting)
    - فعل **SameSite Attribute** علشان تتحكم في المصادر اللي ممكن الكوكي يترسل منها، وده بيقلل من هجمات تزوير الطلبات (Request Forgery)

---